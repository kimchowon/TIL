# 6-4.롬복과 최신 트렌드

## @RequiredArgsConstructor

- 생성자 주입을 하려면 생성자를 추가해줘야 하고 필드가 추가될 때마다 생성자를 수정해줘야 하고 번거로움
- 롬복 라이브러리를 이용하여 필드 주입처럼 생성자 주입을 할 수 있다.
- fiinal 키워드가 붙은 필드를 모아서 생성자를 자동으로 만들어 준다.

## 롬복 원리

- 자바의 애노테이션 프로세서라는 기능을 이용해서 컴파일 시점에 생성자 코드를 자동으로 생성해준다.
- .class 파일을 열어보면 생성자 코드가 추가되어 있는 것을 확인할 수 있다.

# 6-5.조회 빈이 2개 이상

- @Autowired는 타입으로 조회
- 같은 타입인 빈이 2개 이상이라면 의존 관계 주입을 할 때 어떤 스프링 빈을 주입해야할지 몰라 에러가 발생한다.

## 해결 방법

### 1. @Autowired 필드명

- 처음에 타입 매칭을 시도
- 같은 타입인 빈이 여러개이면, 필드 이름이나 파라미터 이름으로 빈 이름을 추가 매칭한다.

### 2. @Qualifier

- 추가 구분자를 붙여주는 방법
- 빈 이름을 변경하는 것은 아님
- 추가 구분자로 못찾으면 빈 이름으로 매칭을 시도함.

### 3.@Primary

- 우선순위를 정하는 방법
- @Autowired시에 여러 빈이 매칭되면 @Primary가 붙은 빈이 우선권을 가진다.

## 실무에서 사용하는 경우

- 데이터 베이스 커넥션을 획득하는 스프링 빈 선언하는 코드
    - 실무에서는 Master/Slave 데이터 베이스 커넥션을 구분하여 사용함.
    - 주로 insert나 update는 Master에서, select는 Slave에서
- Master 데이터 베이스 커넥션을 획득하는 빈을 사용할 때는 @Primary를 붙여 기본적으로 조회하여 사용
- Slave 데이터 베이스 커넥션을 획득하는 빈을 사용할 때는 @Qualifier를 붙여 명시적으로 조회하여 사용

## 우선순위

- @Primary와 @Qualifier 중에 어느것이 우선순위가 높을까
    - @Primary는 기본값처럼 동작하는 것이고 @Qualifier는 수동으로 지정하여 매우 상세하게 동작하는 것
    - 스프링은 자동보다는 수동으로 하는 설정이 우선순위가 높다.
    - 따라서 @Qualifier가 우선순위가 높다.